> Thinking

```

```

> Memory

### Android

```
应用
    进程
应用组件
    Activity
    Service
    BroadcastReceiver
    ContentProvider
    Fragment
    Intent

Context

Activity
    事件分发

前台进程 服务进程 后台进程 空进程

public static String getProcessName(int pid) {
    BufferedReader reader = null;
    try {
        reader = new BufferedReader(new FileReader("/proc/" + pid + "/cmdline"));
        String processName = reader.readLine();
        if (!TextUtils.isEmpty(processName)) {
            processName = processName.trim();
        }
        return processName;
    } catch (Throwable throwable) {
        throwable.printStackTrace();
    } finally {
        try {
            if (reader != null) {
                reader.close();
            }
        } catch (IOException exception) {
            exception.printStackTrace();
        }
    }
    return null;
}

ActivityLifecycleCallbacks activityLifecycleCallbacks = new ActivityLifecycleCallbacks() {
    @Override
    public void onActivityCreated(@NonNull Activity activity, @Nullable Bundle bundle) { }
    @Override
    public void onActivityStarted(@NonNull Activity activity) { }
    @Override
    public void onActivityResumed(@NonNull Activity activity) { }
    @Override
    public void onActivityPaused(@NonNull Activity activity) { }
    @Override
    public void onActivityStopped(@NonNull Activity activity) { }
    @Override
    public void onActivitySaveInstanceState(@NonNull Activity activity, @NonNull Bundle bundle) { }
    @Override
    public void onActivityDestroyed(@NonNull Activity activity) { }
};
application.registerActivityLifecycleCallbacks(activityLifecycleCallbacks);
application.unregisterActivityLifecycleCallbacks(activityLifecycleCallbacks);

public class AskBrainApplication extends Application {
    @Override
    public void onCreate() { }
    @Override
    public void onConfigurationChanged(@NonNull Configuration newConfig) { }
    @Override
    public void onLowMemory() { }
    @Override
    public void onTrimMemory(int level) { }
}

<application
    android:allowBackup="true"
    android:hardwareAccelerated="false"
    android:icon="@mipmap/ic_launcher"
    android:label="@string/app_name"
    android:roundIcon="@mipmap/ic_launcher_round"
    android:supportsRtl="true"
    android:theme="@style/Theme.AppCompat.Light.NoActionBar"
    />


Activity
    ActivityGroup
        TabActivity

AppCompatActivity
ActionBar

public class AskBrainActivity extends AppCompatActivity {
    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) { }
    @Override
    protected void onStart() { }
    @Override
    protected void onResume() { }
    @Override
    protected void onPause() { }
    @Override
    protected void onStop() { }
    @Override
    protected void onDestroy() { }
    @Override
    public void onAttachedToWindow() { }
    @Override
    public void onDetachedFromWindow() { }
    @Override // configChanges
    public void onConfigurationChanged(@NonNull Configuration newConfig) { }
    @Override
    public void onLowMemory() { }
    @Override
    public void onTrimMemory(int level) { }
}

activity.setContentView(R.layout.activity_main);
activity.findViewById(R.id.content);

activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
activity.overridePendingTransition(R.anim.left_in, R.anim.reght_out);

public class AskBrainActivity extends AppCompatActivity {
    
    void startActivity() {
        Intent intent = new Intent();
        intent.putExtra("", "");
        startActivity(intent);
        overridePendingTransition(0, 0);
        
        startActivityForResult(intent, 100);
        finish();
        isFinishing();
        setResult(100, intent);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
    }
}

class AskBrainActivity extends AppCompatActivity {

    public void chekcPermission() {
        switch (ActivityCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE)) {
            case PackageManager.PERMISSION_GRANTED:
            case PackageManager.PERMISSION_DENIED:
        }
    }
    
    void requestPermissions() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
            requestPermissions(new String[]{ }, 100);
        }
        ActivityCompat.requestPermissions(this, new String[]{ }, 100);
    }

    @Override
    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
        super.onRequestPermissionsResult(requestCode, permissions, grantResults);
        if (grantResults.length == permissions.length) {
        }
    }
}

Toolbar toolbar = findViewById(R.id.toolbar);
appCompatActivity.setSupportActionBar(toolbar);
ActionBar actionBar = appCompatActivity.getSupportActionBar();
if (actionBar != null) {
    actionBar.hide();
    actionBar.show();
}

TabHost tabHost = tabActivity.getTabHost();
TabHost.TabSpec tabSpec = tabHost.newTabSpec("");
tabSpec.setIndicator("", context.getDrawable(android.R.mipmap.sym_def_app_icon));
tabSpec.setContent(new Intent());
tabHost.addTab(tabSpec);

<activity android:name=".AskBrainActivity"
    android:exported="true"
    android:launchMode="singleInstance"
    android:screenOrientation="behind"
    android:windowSoftInputMode="adjustPan"
    android:configChanges="orientation|keyboardHidden|screenSize"
    android:noHistory="true"
    android:theme="@style/Theme.AppCompat.Light.NoActionBar"
    android:process=":process"
    />

<activity-alias
    android:name=".sd.Ask"
    android:targetActivity=".AskBrainActivity"
    android:exported="true"
    />

<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter>
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="tencent100424468" />
</intent-filter>

Service
ServiceConnection

class AskBrainService extends Service {
    @Nullable
    @Override
    public IBinder onBind(Intent intent) { return null; }
    @Override
    public boolean onUnbind(Intent intent) { return super.onUnbind(intent); }
    @Override
    public void onCreate() {
        super.onCreate();
        startForeground(1, new Notification());
    }
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) { return super.onStartCommand(intent, flags, startId); }
    @Override
    public void onDestroy() { super.onDestroy(); }
}

Object lock = new Object();
ServiceConnection serviceConnection = new ServiceConnection() {
    @Override
    public void onServiceConnected(ComponentName componentName, IBinder iBinder) {
        iBinder.linkToDeath(new IBinder.DeathRecipient() {
            @Override
            public void binderDied() { }
        }, 0);
        synchronized (lock) {
            iBinder = iBinder;
            lock.notify();
        }
    }
    @Override
    public void onServiceDisconnected(ComponentName componentName) { }
};
context.bindService(new Intent(), serviceConnection, Context.BIND_AUTO_CREATE);
context.unbindService(serviceConnection);
new Thread(new Runnable() {
    @Override
    public void run() {
        synchronized (lock) {
            if (iBinder == null) {
                lock.wait();
            }
        }
    }
}).start();

<uses-permission android:name="android.permission.FOREGROUND_SERVICE" />
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
    context.startForegroundService(new Intent(this, AskBrainService.class));
} else {
    context.startService(new Intent(this, AskBrainService.class));
}

public class AskBrainBroadcastReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) { }
}

IntentFilter intentFilter = new IntentFilter();
LocalBroadcastManager localBroadcastManager = LocalBroadcastManager.getInstance(context);
localBroadcastManager.registerReceiver(broadcastReceiver, intentFilter);
localBroadcastManager.unregisterReceiver(broadcastReceiver);

Intent intent = new Intent();
localBroadcastManager.sendBroadcast(intent);

ContentResolver

public static final String MIMETYPE_XML = "application/xml";
public static final String MIMETYPE_HTML = "text/html";
public static final String MIMETYPE_OCTET_STREAM = "application/octet-stream";
public static final String MIMETYPE_GZIP = "application/x-gzip";

Uri uri = Uri.EMPTY;
uri.getAuthority(); uri.getEncodedAuthority();
uri.getScheme();
uri.getHost();
uri.getPort();
uri.getPathSegments();
uri.getLastPathSegment();
uri.getFragment(); uri.getEncodedFragment();
uri.getQuery(); uri.getEncodedQuery();
uri.getPath(); uri.getEncodedPath();
uri.getUserInfo(); uri.getEncodedUserInfo();

public class AskBrainContentProvider extends ContentProvider {
    @Override
    public boolean onCreate() { return false; }
    @Nullable
    @Override
    public Cursor query(@NonNull Uri uri, @Nullable String[] strings, @Nullable String s, @Nullable String[] strings1, @Nullable String s1) { return null; }
    @Nullable
    @Override
    public String getType(@NonNull Uri uri) { return null; }
    @Nullable
    @Override
    public Uri insert(@NonNull Uri uri, @Nullable ContentValues contentValues) { return null; }
    @Override
    public int delete(@NonNull Uri uri, @Nullable String s, @Nullable String[] strings) { return 0; }
    @Override
    public int update(@NonNull Uri uri, @Nullable ContentValues contentValues, @Nullable String s, @Nullable String[] strings) { return 0; }
}

ContentResolver.SCHEME_ANDROID_RESOURCE
ContentResolver contentResolver = context.getContentResolver();
contentResolver.query();

FragmentManager
FragmentTransaction
Fragment
    DialogFragment

public class AskBrainFragment extends Fragment {
    @Override
    public void onAttach(@NonNull Context context) { }
    @Override
    public void onCreate(@Nullable Bundle savedInstanceState) { }
    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) { return null; }
    @Override
    public void onActivityCreated(@Nullable Bundle savedInstanceState) { }
    @Override
    public void onStart() { }
    @Override
    public void onResume() { }
    @Override
    public void onPause() { }
    @Override
    public void onStop() { }
    @Override
    public void onDestroyView() { }
    @Override
    public void onDestroy() { }
    @Override
    public void onDetach() { }
    @Override
    public void onConfigurationChanged(@NonNull Configuration newConfig) { }
    @Override
    public void onLowMemory() { }
}

FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
fragmentTransaction.replace(R.id.content, new AskBrainFragment());
fragmentTransaction.add(new Fragment(), "");
fragmentTransaction.commit(); fragmentTransaction.commitAllowingStateLoss();
fragmentTransaction.commitNow(); fragmentTransaction.commitNowAllowingStateLoss();
fragmentManager.executePendingTransactions();

Fragment fragment = new Fragment();
fragment.setArguments(new Bundle());
fragment.getArguments();

class AskBrainFragment extends DialogFragment {
    @Override
    public void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setStyle(DialogFragment.STYLE_NO_TITLE, R.style.UpdateAppDialog);
    }
}

Navigation
implementation 'androidx.navigation:navigation-fragment:2.3.5'
implementation 'androidx.navigation:navigation-ui:2.3.5'

Intent
	setAction setFlags putExtra
PendingIntent.getBroadcast(ctx, 0, contentIntent, PendingIntent.FLAG_UPDATE_CURRENT);

```

#### Jetpack

```
Lifecycles
androidx.lifecycle:lifecycle-common:2.2.0
androidx.lifecycle:lifecycle-common-java8:2.2.0
androidx.lifecycle:lifecycle-compiler:2.2.0
androidx.lifecycle:lifecycle-extensions:2.2.0
androidx.lifecycle:lifecycle-livedata:2.2.0
androidx.lifecycle:lifecycle-livedata-core:2.2.0
androidx.lifecycle:lifecycle-reactivestreams:2.2.0
androidx.lifecycle:lifecycle-runtime:2.2.0
androidx.lifecycle:lifecycle-viewmodel:2.2.0
androidx.lifecycle:lifecycle-viewmodel-savedstate:2.2.0

android.arch.lifecycle:common
android.arch.lifecycle:common-java8
android.arch.lifecycle:compiler
android.arch.lifecycle:extensions
android.arch.lifecycle:livedata
android.arch.lifecycle:livedata-core
android.arch.lifecycle:reactivestreams
android.arch.lifecycle:runtime
android.arch.lifecycle:viewmodel
无 viewmodel-savedstate

LifecycleOwner # getLifecycle
Lifecycle
	addObserver removeObserver # LifecycleObserver
	getCurrentState # Lifecycle.State
Lifecycle.State
	isAtLeast
	INITIALIZED
	CREATED
	STARTED
	RESUMED
	DESTROYED
Lifecycle.Event #
	ON_ANY
	ON_CREATE ON_DESTROY
	ON_START ON_STOP
	ON_RESUME ON_PAUSE
LifecycleObserver
	LifecycleEventObserver # onStateChanged
	FullLifecycleObserver
		onCreate onDestroy
		onStart onStop
		onResume onPause

ComponentActivity
	mLifecycleRegistry
ReportFragment

SafeIterableMap<K, V>
SafeIterableMap<K, V> implements Iterable<Map.Entry<K, V>>

-Entry<K, V> mStart
-Entry<K, V> mEnd
-WeakHashMap<SupportRemove<K, V>, Boolean> mIterators

ListIterator<K, V> implements Iterator<Map.Entry<K, V>>, SupportRemove<K, V>
Entry<K, V> mExpectedEnd
Entry<K, V> mNext

AscendingIterator<K, V> extends ListIterator<K, V>
DescendingIterator<K, V> extends ListIterator<K, V>
IteratorWithAdditions implements Iterator<Map.Entry<K, V>>, SupportRemove<K, V>

SupportRemove<K, V>
Entry<K, V> implements Map.Entry<K, V>

LiveData

ViewModel
```



### iOS

```
视图控制器
根视图控制器 一级控制器 RootViewController
二级视图控制器
三级视图控制器
```

### React

```
组件定义
    props defaultProps
    state
生命周期
事件处理
```

