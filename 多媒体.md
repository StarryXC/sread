> Thinking

```

```

> Memory

### Java

```
ImageIO
ImageReader
ImageWriter

ImageTranscoder
    ImageWriter



ImageIO
    read
    write
```



### Android

#### 绘图

```
Canvas
    getWidth
    getHeight
    矩形 drawRect
    圆角矩形 drawRoundRect
    drawBitmap
    drawText
    drawPosText
    圆形 drawCircle
    drawBitmapMesh
    drawPath
    drawTextOnPath
    点 drawPoint
    多个点 drawPoints
    直线 drawLine
    多条直线 drawLines
    椭圆 drawOval
        椭圆是根据矩形生成的，以矩形的长为椭圆的X轴，矩形的宽为椭圆的Y轴，建立的椭圆图形
    弧 drawArc
        弧是椭圆的一部分，而椭圆是根据矩形来生成的，所以弧当然也是根据矩形来生成的
    drawRegion
    clipPath
        Region.Op.DIFFERENCE
    concat
    画布平移 translate
        画布坐标 屏幕左上角 x向左 y向下
    画布旋转 rotate
        围绕坐标原点旋转
    缩放 scale
    扭曲 skew
        倾斜角度的tan值
        (1.732f,0);//X轴倾斜60度，Y轴不变
    save
    restore
    setDrawFilter
        PaintFlagsDrawFilter(0, Paint.ANTI_ALIAS_FLAG | Paint.FILTER_BITMAP_FLAG)
    getDrawFilter

Paint
    ANTI_ALIAS_FLAG
    画笔颜色 setColor
    getColor
    文字大小 setTextSize
    getTextSize
    setTypeface
        Typeface.create("System", Typeface.BOLD)
    getTypeface
    setStyle
        填充 Style.FILL
        描边 Style.STROKE
        填充且描边 Style.FILL_AND_STROKE
    getStyle
    setAlpha
    getAlpha
    setShader
        Shader.TileMode.CLAMP
    getShader
    字体 setTypeface
    measureText
    getTextBounds
    getTextWidths
    setXfermode
        PorterDuffXfermode(PorterDuff.Mode.SRC_IN)
    喵边宽度 setStrokeWidth
    getStrokeWidth
    抗锯齿 影响绘制速度 setAntiAlias
    isAntiAlias
    文字对齐方式 setTextAlign
        Align.CENTER
        Align.LEFT
        Align.RIGHT
    文字加粗 setFakeBoldText
    下划线 setUnderlineText
    字体水平倾斜度，普通斜体字是-0.25 setTextSkewX
        字体水平倾斜度，普通斜体字是-0.25，可见往右斜
        水平倾斜度设置为：0.25，往左斜
    删除线效果 setStrikeThruText
    只会将水平方向拉伸，高度不会变 setTextScaleX
    getFontMetrics Paint.FontMetrics
        五线普 基线 baseLineY
        ascent = baseLineY + fm.ascent
        descent = baseLineY + fm.descent
        top = baseLineY + fm.top
        bottom = baseLineY + fm.bottom
    画text所占的区域 getFontMetricsInt Paint.FontMetricsInt
        top = baseLineY + fm.top;
        bottom = baseLineY + fm.bottom;
        width = (int)paint.measureText(text);
        Rect(baseLineX,top,baseLineX+width,bottom);
    最小矩形 getTextBounds
        top = baseLineY + minRect.top
        bottom = baseLineY + minRect.bottom
        drawRect(minRect,paint);
    画文字
        drawText(text, baseLineX, baseLineY, paint);
    阴影 setShadowLayer

Matrix
    MSCALE_X
    setRotate
    preRotate
    postRotate
    setTranslate
    preTranslate
    postTranslate
    setScale
    preScale
    postScale
    setSkew
    preSkew
    postSkew
    setConcat
    preConcat
    postConcat
    setPolyToPoly

Drawable
    DrawableContainer <-- Drawable.Callback
        AnimationDrawable <-- Runnable Animatable
        StateListDrawable
            AnimatedStateListDrawable
        LevelListDrawable
    BitmapDrawable
    NinePatchDrawable
    ColorDrawable
    DrawableWrapper <-- Drawable.Callback
        ClipDrawable
        InsetDrawable
        RotateDrawable
        ScaleDrawable
    GradientDrawable
    LayerDrawable <-- Drawable.Callback
        RippleDrawable
        TransitionDrawable <-- Drawable.Callback
    ShapeDrawable
        PaintDrawable
    PictureDrawable
    VectorDrawable

Drawable
    setColorFilter
    getColorFilter
    setBounds
    getBounds
    getIntrinsicWidth
    getIntrinsicHeight
    draw

Shader
    BitmapShader
    LinearGradient
    SweepGradient
    RadialGradient
    ComposeShader

DrawFilter
    毛边过滤 PaintFlagsDrawFilter

Xfermode
	PorterDuffXfermode

Typeface
    create
    createFromAsset
    createFromFile
    defaultFromStyle


ColorMatrix

ColorFilter
    PorterDuffColorFilter
        PorterDuff.Mode.SRC_IN
    BlendModeColorFilter
    ColorMatrixColorFilter
    LightingColorFilter

Icon <-- Parcelable
    createWithResource

Gravity
    NO_GRAVITY
    CENTER
    FILL
    CLIP
    RELATIVE
    LEFT
    RIGHT
    TOP
    BOTTOM
    START
    END

Point
    set
    offset

Rect
    width
    height
    centerX
    centerY
    flattenToString
    offset
    offsetTo

RectF

区域 Region
    setPath
    op
        Region.Op.XOR 交集

RegionIterator
    RegionIterator(Region)
    next(Rect)


Path
    moveTo
    lineTo
    close
    addCircle
        逆向绘制 Path.Direction.CCW
    addOval

Color
    WHITE
    BLACK
    TRANSPARENT
    parse
    valueOf
    rgb
    parseColor

Bitmap
    createBitmap
    compress
        CompressFormat.PNG
        CompressFormat.JPEG

BitmapFactory
    decodeByteArray
    decodeFile

BitmapFactory.Options
    inJustDecodeBounds
    inSampleSize
    outMimeType
    outWidth
    outHeight
    outConfig
        Bitmap.Config.ALPHA_8

BitmapRegionDecoder
    newInstance
    decodeRegion

```

#### 相机

```
Manifest.permission.CAMERA
Camera
    open
    release
    getParameters
    setParameters
    预览 setPreviewDisplay
    setOneShotPreviewCallback
    setPreviewCallback PreviewCallback
        onPreviewFrame
    开启预览 startPreview
    停止预览 stopPreview
    autoFocus AutoFocusCallback
        onAutoFocus
    cancelAutoFocus
    setAutoFocusMoveCallback AutoFocusMoveCallback
        onAutoFocusMoving
    照相 takePicture
        ShutterCallback onShutter
        PictureCallback onPictureTaken
    setDisplayOrientation
        90 竖直
    lock
    unlock
    摄像头数目 getNumberOfCameras
    getCameraInfo

Camera.Parameters
    预览尺寸 预览像素 getSupportedPreviewSizes Camera.Size
        width
        height
    getSupportedPictureSizes
    照片的大小 setPictureSize
    getPictureSize
    预览帧率 getSupportedPreviewFpsRange
    getSupportedPreviewFpsRange
    颜色格式 getSupportedPreviewFormats
    setPreviewFpsRange
    getPreviewFpsRange
    预览照片的大小 setPreviewSize
    getPreviewSize
    帧率 每秒几帧 setPreviewFrameRate
    getPreviewFrameRate
    照片的输出格式 setPictureFormat
        PixelFormat.JPEG
    getPictureFormat
    setPreviewFormat
        ImageFormat.NV21
        ImageFormat.YV12
    getPreviewFormat
    聚焦 setFocusMode
        Parameters.FOCUS_MODE_CONTINUOUS_VIDEO
    setFlashMode
        Parameters.FLASH_MODE_AUTO
        打开 Parameters.FLASH_MODE_TORCH
        关闭 Parameters.FLASH_MODE_OFF
    getFlashMode
    白平衡 setWhiteBalance
        Parameters.WHITE_BALANCE_AUTO
    getWhiteBalance
    闪光灯 setSceneMode
        Parameters.SCENE_MODE_AUTO
    getSceneMode
    set
        照片质量 ("jpeg-quality", 85)
    reset
    flatten
    unflatten
    setRotation

Camera.CameraInfo
    CAMERA_FACING_FRONT
    CAMERA_FACING_BACK
    facing
    orientation

判断手机是否存在摄像头
PackageManager
    hasSystemFeature
        PackageManager.FEATURE_CAMERA

Camera2 LOLLIPOP
CameraManager Context.CAMERA_SERVICE
    getCameraIdList
    getConcurrentCameraIds
    getCameraCharacteristics
    getCameraExtensionCharacteristics
    openCamera CameraDevice.StateCallback
        onOpened
        onDisconnected
        onError

CameraCharacteristics
    get
        CameraCharacteristics.LENS_FACING
        CameraMetadata.LENS_FACING_BACK
        CameraMetadata.LENS_FACING_FRONT
        CameraMetadata.LENS_FACING_EXTERNAL

CameraDevice
    close

```

#### 音视频

```
MediaPlayer
    setDataSource
        uri
    setAudioStreamType
        AudioManager.STREAM_MUSIC
        AudioManager.STREAM_ALARM
    setOnCompletionListener OnCompletionListener
        onCompletion
    setOnErrorListener OnErrorListener
        onError
            MediaPlayer.MEDIA_ERROR_SERVER_DIED
    setOnPreparedListener OnPreparedListener
        onPrepared
    setOnInfoListener OnInfoListener
        onInfo
    setOnBufferingUpdateListener OnBufferingUpdateListener
        onBufferingUpdate
    seekTo
    setOnSeekCompleteListener OnSeekCompleteListener
        onSeekComplete
    setOnVideoSizeChangedListener OnVideoSizeChangedListener
        onVideoSizeChanged
    setVolume
    setDisplay
    setSurface
    prepare
    prepareAsync
    start
    stop
    release
    reset
    isPlaying
    setLooping
    isLooping
    mediaPlayer.setDataSource(file.getFileDescriptor(),
						file.getStartOffset(), file.getLength());
    setVolume(BEEP_VOLUME, BEEP_VOLUME);

AudioRecord
    getMinBufferSize
        (44100,
        AudioFormat.CHANNEL_IN_MONO,
        AudioFormat.ENCODING_PCM_16BIT);
    AudioRecord(
        MediaRecorder.AudioSource.MIC,
        44100,
        AudioFormat.CHANNEL_IN_MONO, //单声道
        AudioFormat.ENCODING_PCM_16BIT,
        minBufferSize);
    getState
        STATE_INITIALIZED
        STATE_UNINITIALIZED
    getRecordingState
        RECORDSTATE_RECORDING
    startRecording
    stop
    read
        ERROR_INVALID_OPERATION
        ERROR_BAD_VALUE
    release

AudioTrack
    getMinBufferSize(
        44100,
        AudioFormat.CHANNEL_IN_MONO,
        AudioFormat.ENCODING_PCM_16BIT);
    AudioTrack(
        AudioManager.STREAM_MUSIC,
        44100,
        AudioFormat.CHANNEL_OUT_MONO, //单声道
        AudioFormat.ENCODING_PCM_16BIT,
        minBufferSize,
        AudioTrack.MODE_STREAM);
    play
    getState
        STATE_INITIALIZED
    release
    getPlayState
        PLAYSTATE_PLAYING
        PLAYSTATE_PAUSED
    stop
    pause
    write

AudioManager Context.AUDIO_SERVICE
    铃声模式 getRingerMode
        RINGER_MODE_NORMAL
        静音 RINGER_MODE_SILENT
    getStreamVolume
        STREAM_ALARM
    setStreamVolume
        STREAM_MUSIC
        STREAM_ALARM
        STREAM_RING
        STREAM_NOTIFICATION
        STREAM_SYSTEM
        STREAM_VOICE_CALL
        STREAM_DTMF
        mode NORMAL speakerphoneOn
    getStreamVolume
    getStreamMinVolume
    getStreamMaxVolume

Activity
    设置activity音量控制键控制的音频流 setVolumeControlStream
        AudioManager.STREAM_MUSIC

MediaRecorder
    getMaxAmplitude
    setCamera
    setPreviewDisplay
    setVideoSource
        VideoSource.CAMERA
    setVideoEncoder
        VideoEncoder.H264
    setVideoFrameRate
        25
    setVideoSize
    setAudioSource
        AudioSource.DEFAULT
        麦克风 AudioSource.MIC
    setAudioEncoder
        AudioEncoder.AAC
        AudioEncoder.AMR_NB
    setAudioChannels
        1 MONO
    setAudioSamplingRate
        8000 8000Hz
    setAudioEncodingBitRate
        64
    setOutputFile
    setOutputFormat
        OutputFormat.MPEG_4
        OutputFormat.AMR_NB
    setMaxDuration
        30000
    setMaxFileSize
    setOrientationHint
        90
    reset
    prepare
    release
    start
    stop
    setOnErrorListener OnErrorListener
        onError
    setOnInfoListener OnInfoListener
        onInfo

SoundPool
    setOnLoadCompleteListener OnLoadCompleteListener
        onLoadComplete
    load
    unload
    play
    pause
    resume
    stop
    release

SoundPool.Builder
    build

RingtoneManager
    getDefaultUri
        闹钟 TYPE_ALARM
        通知 TYPE_NOTIFICATION
    铃声 getRingtone(uri)

铃声 Ringtone
    播放 play
    停止 stop
    isPlaying

MediaMetadataRetriever
    setDataSource
    getFrameAtTime


======
RemoteViews <-- Parcelable Filter

自定义 View
 绘制流程 onFinishInflate systemUI

View
    View 滚动
    View 内嵌滚动
    View 事件分发

ViewTreeObserver

Dialog # 自定义 ondestroy
PopupWindow # 自定义
Menu
Toast
通知 NotificationCompat.Builder
动画
InputEvent # DPAD_CENTER 确认键

View
    位置 状态 深色模式 执行动画

事件分发 touch

```

#### 录屏

```

MediaProjectionManager
MediaProjectionManager mediaProjectionManager = (MediaProjectionManager) getSystemService(Context.MEDIA_PROJECTION_SERVICE);
Intent intent = mediaProjectionManager.createScreenCaptureIntent();
startActivityForResult(intent, 100);

MediaProjection mediaProjection = mediaProjectionManager.getMediaProjection(resultCode, data);
MediaCodec mediaCodec = MediaCodec.createEncoderByType("video/avc");
MediaFormat mediaFormat = MediaFormat.createVideoFormat("video/avc", 720, 1280);
mediaFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT, MediaCodecInfo.CodecCapabilities.COLOR_FormatSurface);
mediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, 400_000);
mediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, 15);
mediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 2);
mediaCodec.configure(mediaFormat, null, null, MediaCodec.CONFIGURE_FLAG_ENCODE);
Surface surface = mediaCodec.createInputSurface();
VirtualDisplay virtualDisplay = mediaProjection.createVirtualDisplay(
        "screen-codec",
        720, 1280, 1,
        DisplayManager.VIRTUAL_DISPLAY_FLAG_PUBLIC,surface, null, null);

mediaCodec.start();
MediaCodec.BufferInfo bufferInfo = new MediaCodec.BufferInfo();
long time = System.currentTimeMillis();

long startTime = bufferInfo.presentationTimeUs / 1000;
OutputStream outputStream = new FileOutputStream("");
int index = mediaCodec.dequeueOutputBuffer(bufferInfo, 100_000);// 微妙
if (index >= 0) {
    if (System.currentTimeMillis() - time >= 2000) { // 2s 关键帧
        Bundle bundle = new Bundle();
        bundle.putInt(MediaCodec.PARAMETER_KEY_REQUEST_SYNC_FRAME, 0);
        mediaCodec.setParameters(bundle);
        time = System.currentTimeMillis();
    }
    ByteBuffer byteBuffer = mediaCodec.getOutputBuffer(index);
    byte[] outData = new byte[bufferInfo.size];
    byteBuffer.get(outData);
    long duration = bufferInfo.presentationTimeUs / 1000 - startTime;
    outputStream.write(outData);
    outputStream.write('\n');
    mediaCodec.releaseOutputBuffer(index, false);
}

```

#### MediaStore

```
MediaStore.Images.Media.DATA,
                MediaStore.Images.Media.DISPLAY_NAME,
                MediaStore.Images.Media.DATE_ADDED,
                MediaStore.Images.Media._ID

```

#### GiraffePlayer

```
https://github.com/tcking/GiraffePlayer
```

#### Vitamio

```
https://github.com/yixia/VitamioBundle
https://github.com/yixia/VitamioBundleStudio
http://www.vitamio.org/
```

#### UniversalVideoView

```
https://github.com/linsea/UniversalVideoView
```

#### ijkplayer

```
https://github.com/bilibili/ijkplayer
```

#### DanmakuFlameMaster

```
https://github.com/bilibili/DanmakuFlameMaster
```

#### PLDroidPlayer

```
https://github.com/pili-engineering/PLDroidPlayer
```

#### PLDroidShortVideo

```
https://github.com/pili-engineering/PLDroidShortVideo
```

#### PLDroidCameraStreaming

```
https://github.com/pili-engineering/PLDroidMediaStreaming
```

#### ExoPlayer

```
https://github.com/google/ExoPlayer

implementation 'com.google.android.exoplayer:exoplayer:2.13.3'

exoplayer core dash ui

Timeline.Window window = new Timeline.Window();
SimpleExoPlayerView simpleExoPlayerView = null;

BandwidthMeter bandwidthMeter = new DefaultBandwidthMeter();
TrackSelection.Factory videoTrackSelectionFactory =
        new AdaptiveVideoTrackSelection.Factory(bandwidthMeter);
TrackSelector trackSelector =
        new DefaultTrackSelector(videoTrackSelectionFactory);
LoadControl loadControl = new DefaultLoadControl();
SimpleExoPlayer player =
        ExoPlayerFactory.newSimpleInstance(this, trackSelector, loadControl);
simpleExoPlayerView.setPlayer(player);
player.setPlayWhenReady(true);

DefaultBandwidthMeter bandwidthMeter = new DefaultBandwidthMeter();
DataSource.Factory dataSourceFactory = new DefaultDataSourceFactory(this, bandwidthMeter
        , new DefaultHttpDataSourceFactory(Util.getUserAgent(this, "yourApplicationName"), bandwidthMeter));
ExtractorsFactory extractorsFactory = new DefaultExtractorsFactory();
MediaSource videoSource = new ExtractorMediaSource(Uri.parse(VIDEO_URL),
        dataSourceFactory, extractorsFactory, mainHandler, null);
MediaSource videoSource2 = new ExtractorMediaSource(Uri.parse(VIDEO_URL_DEFAULT),
        dataSourceFactory, extractorsFactory, mainHandler, null);
//组合几个视频
ConcatenatingMediaSource concatenatingMediaSource = new ConcatenatingMediaSource(videoSource,videoSource2);
//不停循环
LoopingMediaSource loopingSource = new LoopingMediaSource(concatenatingMediaSource);
player.prepare(loopingSource);

//
DefaultBandwidthMeter bandwidthMeter = new DefaultBandwidthMeter();
// Produces DataSource instances through which media data is loaded.
DataSource.Factory dataSourceFactory = new DefaultDataSourceFactory(this, bandwidthMeter
        , new DefaultHttpDataSourceFactory(Util.getUserAgent(this, "yourApplicationName"), bandwidthMeter));
// Produces Extractor instances for parsing the media data.
ExtractorsFactory extractorsFactory = new DefaultExtractorsFactory();
// This is the MediaSource representing the media to be played.
MediaSource videoSource = new ExtractorMediaSource(Uri.parse(url),
        dataSourceFactory, extractorsFactory, mainHandler, null);

//不停循环
LoopingMediaSource loopingSource = new LoopingMediaSource(videoSource);
SurfaceView sv = (SurfaceView) findViewById(R.id.sv);
player.setVideoSurfaceView(sv);
player.setPlayWhenReady(true);
player.prepare(loopingSource);

//
int playerWindow = player.getCurrentWindowIndex();
playerPosition = C.TIME_UNSET;
Timeline timeline = player.getCurrentTimeline();
if (!timeline.isEmpty() && timeline.getWindow(playerWindow, window).isSeekable) {
    playerPosition = player.getCurrentPosition();
}
player.release();
player = null;
```



### iOS

```
绘图
```

### HTML5

```
绘图
多媒体标签
<canvas> # 绘图
<object> # 对象
<param> # 对象参数
<embed> # 嵌入
<audio> # 音频
<video> # 视频
<source> # 媒体源

<canvas id="canvas" width="1000" height	="1000" style="background:#000">
	您的浏览器不支持canvas标签
</canvas>
<script>
	var canvas=document.getElementById('canvas'); //获取canvas元素
	var cxt=canvas.getContext('2d'); //设置2d绘图环境
	var time=0; //声明一个时间参数(1:1天)
	function draw(){
		cxt.clearRect(0,0,1000,1000); //清除画布(清除之前的内容 重新画)
		//画轨道
		cxt.strokeStyle="#fff"; //设置笔触颜色
		cxt.beginPath();
		cxt.arc(500,500,100,0,360,false);
		cxt.closePath();
		cxt.stroke();
		//画太阳
		cxt.beginPath();
		cxt.arc(500,500,20,0,360,false);
		cxt.closePath();
		//太阳需要填充颜色
		//设置填充颜色(渐变色)
		//cxt.createRadialGradient(内圆心x,内圆形y,内半径,外圆心x,外圆心y,外半径);
		var sunColor=cxt.createRadialGradient(500,500,0,500,500,20);
		sunColor.addColorStop(0,"#f00");
		sunColor.addColorStop(1,"#f90");
		cxt.fillStyle=sunColor;
		cxt.fill();
		//画地球
		cxt.save();
		
		cxt.translate(500,500); //设置一下异次元空间的0，0点
		//设置旋转角度
		//cxt.rotate(90*Math.PI/190);
		//地球公转一周需要365天，time=1天 一天转365/360度
		cxt.rotate(time*365/360*Math.PI/190);
		//画出地球
		cxt.beginPath();
		cxt.arc(0,-100,10,0,360,false);
		cxt.closePath();
		//设置一下地球的颜色
		var earthColor=cxt.createRadialGradient(0,-100,0,0,-100,10);
		earthColor.addColorStop(0,'#78B1E8');
		earthColor.addColorStop(1,'#050C12');
		cxt.fillStyle=earthColor;
		cxt.fill();
		cxt.restore();
		time+=1; //每画一次图像，时间参数加1
	}
	//使地球动起来
	setInterval(draw,10);
</script>

```

